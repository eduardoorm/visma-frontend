<nz-modal
  [(nzVisible)]="visible"
  [nzTitle]="editMode ? 'Editar división' : 'Crear nueva división'"
  [nzFooter]="modalFooter"
  (nzOnCancel)="handleCancel()"
  nzWidth="600px">
  
  <ng-container *nzModalContent>
    <form nz-form [formGroup]="divisionForm" nzLayout="vertical">
      
      <!-- Nombre -->
      <nz-form-item>
        <nz-form-label nzRequired>Nombre de la división</nz-form-label>
        <nz-form-control nzErrorTip="Por favor ingrese el nombre de la división (mínimo 2 caracteres)">
          <input
            nz-input
            formControlName="name"
            placeholder="Ej: Marketing, Desarrollo, etc."
            type="text" />
        </nz-form-control>
      </nz-form-item>

      <!-- División Superior -->
      <nz-form-item>
        <nz-form-label>División superior (opcional)</nz-form-label>
        <nz-form-control>
          <nz-select
            formControlName="parentId"
            nzPlaceHolder="Seleccione una división superior"
            nzAllowClear>
            <nz-option
              *ngFor="let division of parentDivisions"
              [nzValue]="division.id"
              [nzLabel]="division.name">
            </nz-option>
          </nz-select>
        </nz-form-control>
      </nz-form-item>

      <!-- Nivel -->
      <nz-form-item>
        <nz-form-label nzRequired>Nivel</nz-form-label>
        <nz-form-control nzErrorTip="Por favor seleccione un nivel">
          <nz-select
            formControlName="level"
            nzPlaceHolder="Seleccione un nivel">
            <nz-option
              *ngFor="let level of levelOptions"
              [nzValue]="level.value"
              [nzLabel]="level.label">
            </nz-option>
          </nz-select>
        </nz-form-control>
      </nz-form-item>

      <!-- Colaboradores -->
      <nz-form-item>
        <nz-form-label nzRequired>Número de colaboradores</nz-form-label>
        <nz-form-control nzErrorTip="Por favor ingrese el número de colaboradores">
          <nz-input-number
            formControlName="collaborators"
            [nzMin]="0"
            [nzMax]="10000"
            [nzStep]="1"
            nzPlaceHolder="Número de colaboradores"
            style="width: 100%">
          </nz-input-number>
        </nz-form-control>
      </nz-form-item>

      <!-- Embajador (opcional) -->
      <nz-form-item>
        <nz-form-label>Nombre del embajador (opcional)</nz-form-label>
        <nz-form-control nzErrorTip="El nombre no puede exceder 100 caracteres">
          <input
            nz-input
            formControlName="ambassadorName"
            placeholder="Ej: Juan Pérez"
            type="text" />
        </nz-form-control>
      </nz-form-item>

    </form>
  </ng-container>

  <ng-template #modalFooter>
    <button nz-button nzType="default" (click)="handleCancel()">
      Cancelar
    </button>
    <button
      nz-button
      nzType="primary"
      (click)="handleOk()"
      [nzLoading]="isLoading"
      [disabled]="!divisionForm.valid">
      {{ editMode ? 'Guardar cambios' : 'Crear división' }}
    </button>
  </ng-template>

</nz-modal>
